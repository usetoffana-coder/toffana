<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configurações Visual - Admin</title>
  <link rel="stylesheet" href="../assets/css/admin.css">
  <link rel="stylesheet" href="../assets/css/admin-mobile.css">
</head>
<body data-permission="config.write">
  <div class="admin-layout">
 <!-- Menu Hambúrguer (Mobile) -->
    <button class="btn-menu-toggle-admin" id="menuToggleAdmin" aria-label="Abrir menu" aria-expanded="false">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <!-- Overlay do Menu -->
    <div class="menu-overlay-admin" id="menuOverlayAdmin"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="adminSidebar">
      <div class="sidebar-header">
        <h2>📦 Painel</h2>
        <button class="btn-close-sidebar" id="btnCloseSidebar" aria-label="Fechar menu">
          <span>✖</span>
        </button>
      </div>
            <nav class="sidebar-nav">
        <a href="../index.html" class="nav-item">
          <span class="icon">📊</span>
          <span>Dashboard</span>
        </a>
        <a href="../produtos.html" class="nav-item">
          <span class="icon">📦</span>
          <span>Produtos</span>
        </a>
        <a href="../metricas.html" class="nav-item">
          <span class="icon">📈</span>
          <span>Métricas</span>
        </a>
        <a href="../usuarios.html" class="nav-item" data-permission="admin.users">
          <span class="icon">🧑‍💼</span>
          <span>Usuários</span>
        </a>
        
        <!-- Submenu Configurações -->
        <div class="nav-submenu">
          <span class="nav-submenu-title">⚙️ Configurações</span>
          <a href="visual.html" class="nav-item-sub active">
            <span class="icon">🎨</span>
            <span>Visual</span>
          </a>
          <a href="produtos.html" class="nav-item-sub">
            <span class="icon">📦</span>
            <span>Produtos</span>
          </a>
          <a href="banners.html" class="nav-item-sub">
            <span class="icon">🖼️</span>
            <span>Banners</span>
          </a>
          <a href="menu-links.html" class="nav-item-sub">
            <span class="icon">🔗</span>
            <span>Menu & Links</span>
          </a>
          <a href="redes-sociais.html" class="nav-item-sub">
            <span class="icon">📱</span>
            <span>Redes Sociais</span>
          </a>
          <a href="pagamento.html" class="nav-item-sub">
            <span class="icon">💳</span>
            <span>Pagamento</span>
          </a>
          <a href="comunicacao.html" class="nav-item-sub">
            <span class="icon">💬</span>
            <span>Comunicação</span>
          </a>
          <a href="tracking.html" class="nav-item-sub">
            <span class="icon">📊</span>
            <span>Tracking</span>
          </a>
        </div>
        
        <a href="/" class="nav-item" target="_blank" rel="noopener noreferrer">
          <span class="icon">🌐</span>
          <span>Ver Catálogo</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <button id="logoutBtn" class="btn-logout">Sair</button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="topbar">
        <h1>🎨 Configurações Visual</h1>
        <div class="topbar-actions">
          <button class="btn-theme-toggle-admin" id="themeToggleAdmin" aria-label="Alternar tema">
            <span class="theme-icon">🌙</span>
          </button>
        </div>
      </header>

      <div class="container">
        <form id="configVisualForm" class="form-card">
          
          <!-- Identidade da Loja -->
          <section class="config-section">
            <h2>🏪 Identidade da Loja</h2>
            
            <div class="form-group">
              <label for="nomeLoja">Nome da Loja *</label>
              <input type="text" id="nomeLoja" name="nomeLoja" required>
            </div>

            <div class="form-group">
              <label for="logoUpload">Logo da Loja</label>
              <input type="file" id="logoUpload" accept="image/*">
              <input type="hidden" id="logoUrl" name="logoUrl">
              <div id="logoPreview" class="image-preview"></div>
              <small>Recomendado: 200x60px (PNG com fundo transparente)</small>
            </div>
          </section>

          <!-- Cores do Catálogo - EXPANDIDO -->
          <section class="config-section">
            <h2>🎨 Personalização Completa de Cores</h2>
            
            <h3 style="font-size: 16px; margin-bottom: 20px; color: var(--text-secondary);">🔵 Cores Principais</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="corPrimaria">Cor Primária</label>
                <div class="color-picker-group">
                  <input type="color" id="corPrimaria" name="corPrimaria" value="#6366f1">
                  <input type="text" id="corPrimariaTexto" value="#6366f1" readonly>
                </div>
                <small>Botões principais, links e destaques importantes</small>
              </div>

              <div class="form-group">
                <label for="corSecundaria">Cor Secundária (WhatsApp)</label>
                <div class="color-picker-group">
                  <input type="color" id="corSecundaria" name="corSecundaria" value="#10b981">
                  <input type="text" id="corSecundariaTexto" value="#10b981" readonly>
                </div>
                <small>Botões WhatsApp e destaques verdes</small>
              </div>
            </div>

            <h3 style="font-size: 16px; margin: 30px 0 20px; color: var(--text-secondary);">🌑 Fundo e Texto</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="corFundo">Cor de Fundo Geral</label>
                <div class="color-picker-group">
                  <input type="color" id="corFundo" name="corFundo" value="#0f172a">
                  <input type="text" id="corFundoTexto" value="#0f172a" readonly>
                </div>
                <small>Cor de fundo principal do catálogo</small>
              </div>

              <div class="form-group">
                <label for="corTexto">Cor do Texto Principal</label>
                <div class="color-picker-group">
                  <input type="color" id="corTexto" name="corTexto" value="#f1f5f9">
                  <input type="text" id="corTextoTexto" value="#f1f5f9" readonly>
                </div>
                <small>Cor dos textos e títulos</small>
              </div>
            </div>

            <h3 style="font-size: 16px; margin: 30px 0 20px; color: var(--text-secondary);">🧭 Header e Menu de Navegação</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="corHeaderBg">Cor de Fundo do Header</label>
                <div class="color-picker-group">
                  <input type="color" id="corHeaderBg" name="corHeaderBg" value="#1e293b">
                  <input type="text" id="corHeaderBgTexto" value="#1e293b" readonly>
                </div>
                <small>Fundo do cabeçalho e barra de navegação</small>
              </div>

              <div class="form-group">
                <label for="corMenuTexto">Cor do Texto do Menu</label>
                <div class="color-picker-group">
                  <input type="color" id="corMenuTexto" name="corMenuTexto" value="#94a3b8">
                  <input type="text" id="corMenuTextoTexto" value="#94a3b8" readonly>
                </div>
                <small>Cor dos itens do menu de categorias</small>
              </div>
            </div>

            <h3 style="font-size: 16px; margin: 30px 0 20px; color: var(--text-secondary);">🧱 Cards de Produtos</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="corCardBg">Cor de Fundo dos Cards</label>
                <div class="color-picker-group">
                  <input type="color" id="corCardBg" name="corCardBg" value="#1e293b">
                  <input type="text" id="corCardBgTexto" value="#1e293b" readonly>
                </div>
                <small>Fundo dos cards de produtos</small>
              </div>

              <div class="form-group">
                <label for="corCardBorda">Cor da Borda dos Cards</label>
                <div class="color-picker-group">
                  <input type="color" id="corCardBorda" name="corCardBorda" value="#334155">
                  <input type="text" id="corCardBordaTexto" value="#334155" readonly>
                </div>
                <small>Bordas dos cards de produtos</small>
              </div>
            </div>

            <h3 style="font-size: 16px; margin: 30px 0 20px; color: var(--text-secondary);">🔘 Botões e Hover</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="corBotaoPrimario">Botão Primário</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoPrimario" name="corBotaoPrimario" value="#6366f1">
                  <input type="text" id="corBotaoPrimarioTexto" value="#6366f1" readonly>
                </div>
                <small>Cor padrão de botões principais</small>
              </div>
              <div class="form-group">
                <label for="corBotaoPrimarioHover">Botão Primário (Hover)</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoPrimarioHover" name="corBotaoPrimarioHover" value="#4f46e5">
                  <input type="text" id="corBotaoPrimarioHoverTexto" value="#4f46e5" readonly>
                </div>
                <small>Cor ao passar o mouse</small>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="corBotaoPrimarioTextoCor">Texto do Botão Primário</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoPrimarioTextoCor" name="corBotaoPrimarioTextoCor" value="#ffffff">
                  <input type="text" id="corBotaoPrimarioTextoCorTexto" value="#ffffff" readonly>
                </div>
                <small>Cor do texto dos botões principais</small>
              </div>
              <div class="form-group">
                <label for="corBotaoOutline">Botão Contorno</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoOutline" name="corBotaoOutline" value="#6366f1">
                  <input type="text" id="corBotaoOutlineTexto" value="#6366f1" readonly>
                </div>
                <small>Cor da borda/texto do botão "Adicionar ao Carrinho"</small>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="corBotaoOutlineHover">Botão Contorno (Hover)</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoOutlineHover" name="corBotaoOutlineHover" value="#6366f1">
                  <input type="text" id="corBotaoOutlineHoverTexto" value="#6366f1" readonly>
                </div>
                <small>Cor do fundo no hover do botão contorno</small>
              </div>
              <div class="form-group">
                <label for="corBotaoOutlineHoverTextoCor">Texto Hover (Contorno)</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoOutlineHoverTextoCor" name="corBotaoOutlineHoverTextoCor" value="#ffffff">
                  <input type="text" id="corBotaoOutlineHoverTextoCorTexto" value="#ffffff" readonly>
                </div>
                <small>Cor do texto no hover do botão contorno</small>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="corBotaoWhatsapp">Botão WhatsApp</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoWhatsapp" name="corBotaoWhatsapp" value="#10b981">
                  <input type="text" id="corBotaoWhatsappTexto" value="#10b981" readonly>
                </div>
                <small>Cor do botão de WhatsApp</small>
              </div>
              <div class="form-group">
                <label for="corBotaoWhatsappHover">Botão WhatsApp (Hover)</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoWhatsappHover" name="corBotaoWhatsappHover" value="#059669">
                  <input type="text" id="corBotaoWhatsappHoverTexto" value="#059669" readonly>
                </div>
                <small>Cor ao passar o mouse</small>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="corBotaoWhatsappTextoCor">Texto do WhatsApp</label>
                <div class="color-picker-group">
                  <input type="color" id="corBotaoWhatsappTextoCor" name="corBotaoWhatsappTextoCor" value="#ffffff">
                  <input type="text" id="corBotaoWhatsappTextoCorTexto" value="#ffffff" readonly>
                </div>
                <small>Cor do texto do botão WhatsApp</small>
              </div>
            </div>

            <h3 style="font-size: 16px; margin: 30px 0 20px; color: var(--text-secondary);">🦶 Footer (Rodapé)</h3>
            <div class="form-row">
              <div class="form-group">
                <label for="corFooterBg">Cor de Fundo do Footer</label>
                <div class="color-picker-group">
                  <input type="color" id="corFooterBg" name="corFooterBg" value="#0f172a">
                  <input type="text" id="corFooterBgTexto" value="#0f172a" readonly>
                </div>
                <small>Fundo do rodapé</small>
              </div>

              <div class="form-group">
                <label for="corFooterTexto">Cor do Texto do Footer</label>
                <div class="color-picker-group">
                  <input type="color" id="corFooterTexto" name="corFooterTexto" value="#94a3b8">
                  <input type="text" id="corFooterTextoTexto" value="#94a3b8" readonly>
                </div>
                <small>Cor dos textos no rodapé</small>
              </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: rgba(99, 102, 241, 0.1); border-radius: 12px; border: 1px solid rgba(99, 102, 241, 0.3);">
              <button type="button" class="btn btn-secondary" style="width: 100%;" onclick="resetarCores()">
                🔁 Restaurar Todas as Cores Padrão
              </button>
            </div>
          </section>

          <!-- Aviso Informativo -->
          <section class="config-section">
            <h2>📢 Aviso Informativo</h2>
            
            <div class="form-group">
              <label for="avisoTexto">Texto do Aviso Principal</label>
              <textarea id="avisoTexto" name="avisoTexto" rows="3"></textarea>
              <small>Este aviso aparece em popup no catálogo</small>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="avisoBotaoTexto">Texto do Botão</label>
                <input type="text" id="avisoBotaoTexto" name="avisoBotaoTexto">
              </div>
              <div class="form-group">
                <label for="avisoBotaoUrl">URL do Botão</label>
                <input type="url" id="avisoBotaoUrl" name="avisoBotaoUrl">
              </div>
            </div>
          </section>

          <!-- Taxa de Entrega -->
          <section class="config-section">
            <h2>🏍️ Entrega</h2>
            
            <div class="form-group">
              <label for="avisoEntregaTexto">Texto do Aviso Fixo (topo do catálogo)</label>
              <textarea id="avisoEntregaTexto" name="avisoEntregaTexto" rows="2"></textarea>
              <small>Use {taxa} para exibir o valor da entrega</small>
            </div>

            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="exibirTaxaEntrega" name="exibirTaxaEntrega">
                Exibir aviso de taxa de entrega no catálogo
              </label>
            </div>
          </section>

          <!-- Texto do Rodapé -->
          <section class="config-section">
            <h2>📝 Texto do Rodapé</h2>
            <div class="form-group">
              <label for="footerTexto">Texto do Rodapé</label>
              <textarea id="footerTexto" rows="3"></textarea>
              <small>Descrição curta exibida no rodapé do catálogo</small>
            </div>
          </section>

          <!-- Preview ao Vivo -->
          <section class="config-section">
            <h2>👁️ Pré-visualização das Cores</h2>
            <div class="preview-container">
              <div class="preview-box" id="previewCatalogo">
                <div class="preview-header" id="previewHeader">
                  <div class="preview-logo" id="previewLogo">Sua Loja</div>
                  <button class="preview-btn" id="previewBtn">Categoria</button>
                </div>
                <div class="preview-card" id="previewCard">
                  <div class="preview-card-content">
                    <h3 id="previewTexto">Produto Exemplo</h3>
                    <p style="color: var(--text-secondary); font-size: 14px;">R$ 199,90</p>
                    <button class="preview-whatsapp" id="previewWhatsapp">
                      📱 WhatsApp
                    </button>
                  </div>
                </div>
                <div class="preview-footer" id="previewFooter" style="margin-top: 20px; padding: 15px; border-radius: 8px;">
                  <p id="previewFooterText" style="font-size: 13px; margin: 0;">© 2025 Sua Loja - Rodapé</p>
                </div>
              </div>
              <small>As cores serão aplicadas em tempo real no preview acima</small>
            </div>
          </section>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">💾 Salvar Todas as Configurações</button>
          </div>
        </form>
      </div>
    </main>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-check-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <!-- V3 - Base Scripts -->
  <script src="../assets/js/core/config.js"></script>
  <script src="../assets/js/security.constants.js"></script>
  <script src="../assets/js/services/sanitize.service.js"></script>
  <script src="../assets/js/core/dom.utils.js"></script>
  <script src="../assets/js/core/theme.service.js"></script>
  <script src="../assets/js/core/admin.shell.js"></script>
  <script src="../assets/js/core/rate-limiter.js"></script>
  <script src="../assets/js/core/crypto.service.js"></script>
  <script src="../assets/js/core/firebase.js"></script>
  <script src="../assets/js/core/auth.service.js"></script>
  <script src="../assets/js/core/rbac.service.js"></script>
  <script src="../assets/js/core/auth.guard.js"></script>
  <script src="../assets/js/core/session.manager.js"></script>
  <script src="../assets/js/services/config.service.js"></script>
  <script src="../assets/js/services/audit.service.js"></script>
  <script src="../assets/js/services/alerts.service.js"></script>
  <script src="../assets/js/services/users.service.js"></script>
  <script src="../assets/js/services/config-version.service.js"></script>
  <script src="../assets/js/services/produtos.service.js"></script>

  
  
  <script src="../assets/js/pages/config-visual.page.js"></script>
</body>
</html>





















  


